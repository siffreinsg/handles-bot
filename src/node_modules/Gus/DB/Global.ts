import * as low from 'lowdb'
import * as FileSync from 'lowdb/adapters/FileSync' 

export default class GlobalDB
{
    private dbPath: string = './'
    private adapter: FileSync
    private db: low

    constructor(dbPath)
    {
        this.dbPath += dbPath

        this.adapter = new FileSync(this.dbPath, {defaultValue: {}})
        this.db = low(this.adapter)

        this.db.defaults(
            {
                servers: [],
                globalConfig: {}
            }).write()
    }

    getUsers(serverid: string) {
        return this.db.get('servers').find({id: serverid}).get('users')
    }

    getConfig(serverid: string) {
        return this.db.get('servers').find({id: serverid}).get('config')
    }
}
