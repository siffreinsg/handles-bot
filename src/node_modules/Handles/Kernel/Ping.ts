const http = require('http')
const port = 7337

const requestHandler = (req, res) => {
    if (req.url === '/ping') {
        res.writeHead(200, { 'Content-Type': 'application/json' })
        res.write(JSON.stringify({ ping: 'pong' }), 'utf8')
        res.end()
    } else if (req.url === '/favicon') {
        res.end()
    } else {
        res.writeHead(404, { 'Content-Type': 'text/plain' })
        res.write('Error 404! Page not found.')
        res.end()
    }
}
const server = http.createServer(requestHandler)

server.listen(port, (err) => {
    if (err) return console.log('Something bad happened on server listening on port' + port + ' :', err)
})

server.once('error', function (err) {
    if (err.code === 'EADDRINUSE') return 0
})
